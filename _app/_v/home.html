@require(encStatus,teams,leagues)

<div class="col_12">
	<div class="row">
		<h3>encoder management</h3>
	</div>
@if encStatus=="off" or encStatus=="vod":
	<div class="row">
		<p>Start a new event</p>
	</div>
	<div class="col_5">
			<div class="col_12">
	 			<label for="hmteam" class="cw_4">Home Team</label>
				<select id="hmteam" class="cw_8">
					<!-- <option value="" disabled="disabled" selected></option> -->
@for team in teams:
					<option value="@team['name']">@team['name']</option>
@end
				</select>
			</div>
			<div class="col_12">
	 			<label for="vsteam" class="cw_4">Visitor Team</label>
				<select id="vsteam" class="cw_8">
					<!-- <option value="" disabled="disabled" selected></option> -->
@for team in teams:
					<option value="@team['name']">@team['name']</option>
@end
				</select>
			</div>
			<div class="col_12">
				<label for="league" class="cw_4">League</label>
				<select id="league" class="cw_8">
					<!-- <option value="" disabled="disabled" selected></option> -->
@for league in leagues:
					<option value="@league['name']">@league['name']</option>
@end
				</select>
			</div>
	</div>
@end
	<div class="col_6">
		<div class="row">
@if encStatus=="off" or encStatus=="vod":
			<button class="medium green col_4 ajaxbtn" action="encstart" param="hmteam,vsteam,league">
				<span class="icon-play"></span> Start
			</button>
			<button class="medium blue col_4 ajaxbtn" action="encshutdown">
				<span class="icon-off"></span> Shut down
			</button>
@end
@if encStatus=='live':
			<button class="medium orange col_4 ajaxbtn" action="encpause">
				<span class="icon-pause"></span> Pause
			</button>
@end
@if encStatus=='paused':
			<button class="medium blue col_4 ajaxbtn" action="encresume">
				<span class="icon-play"></span> Resume
			</button>
@end
@if encStatus=='live' or encStatus=='paused':
			<button class="medium red col_4 ajaxbtn" action="encstop">
				<span class="icon-stop"></span> Stop
			</button>
@end
			<button class="medium col_4 ajaxbtn" action="sync2cloud">
				<span class="icon-cloud"></span> Sync encoder
			</button>
		</div>
	</div>
</div>
<script type="text/javascript">
function fOnLoad(){
	// get the encoder status at first, then it triggers camera status updates
	$.ajax({
		url: 'ajax/encoderstatus',
		success: function(data, textStatus, xhr) {
			// try{
				encStatus = eval("("+data+")");
				// get the camera status
				ajaxCamStatus();
			// }
			// catch(e){

			// }
		}//success
	});
}
</script>
